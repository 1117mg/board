<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>๊ฒ์ํ ๋ชฉ๋ก</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/aside.css">
    <link rel="stylesheet" href="/css/layout.css">
</head>
</head>
<body>
<header th:replace="thymeleaf/header :: header"></header>
<aside class="side-bar">
    <section class="side-bar__icon-box">
        <section class="side-bar__icon-1">
            <div></div>
            <div></div>
            <div></div>
        </section>
    </section>
    <ul>
        <li th:each="category : ${categories}">
            <a th:if="${category.ctgPno == '0'}" th:href="@{${category.url}}">
                <span><i class="fa-solid fa-cat"></i></span>
                <span th:text="${category.ctgNm}">์นดํ๊ณ๋ฆฌ ์ด๋ฆ</span>
            </a>
            <ul th:if="${subCategoriesMap[category.ctgNo] != null}">
                <li th:each="subCategory : ${subCategoriesMap[category.ctgNo]}">
                    <a th:href="@{${subCategory.url}}" th:text="${subCategory.ctgNm}">์๋ธ์นดํ๊ณ๋ฆฌ ์ด๋ฆ</a>
                </li>
            </ul>
        </li>
    </ul>
    <!-- ๋ก๊ทธ์ธ/๋ก๊ทธ์์ ๋ฒํผ ์ถ๊ฐ -->
    <div class="side-bar__login">
        <div th:if="${user != null}" class="text-center">
            <span th:text="${username}">ใใใ</span> ๋ ํ์ํฉ๋๋ค!<br><br>
        </div>
        <div th:if="${user != null}" class="text-center">
            <!-- ์ฌ์ฉ์๊ฐ ๋ก๊ทธ์ธํ ๊ฒฝ์ฐ -->
            <input type="button" value="๋ง์ดํ์ด์ง" th:attr="onclick=|location.href='/mypage/' + '${user.userId}'|" class="btn btn-success">
            <input type="button" value="๋ก๊ทธ์์" onclick="location.href='/logout'" class="btn btn-danger">
        </div>
        <div th:if="${user == null}" class="text-center">
            <!-- ์ฌ์ฉ์๊ฐ ๋ก๊ทธ์ธํ์ง ์์ ๊ฒฝ์ฐ -->
            <input type="button" value="๋ก๊ทธ์ธ" onclick="location.href='/login'" class="btn btn-primary">
            <input type="button" value="ํ์๊ฐ์" onclick="location.href='/join'" class="btn btn-success">
        </div>
    </div>
</aside>
<div class="content-area">
    <div class="py-5 text-center">
        <h1 th:text="${boardType == 0 ? '๊ณต์ง์ฌํญ ๊ฒ์ํ' : 'QnA ๊ฒ์ํ'}"></h1>
    </div>
    <table class="table table-hover">
        <thead>
        <tr>
            <th class="one wide">๋ฒํธ</th>
            <th class="ten wide">๊ธ์๋ชฉ</th>
            <th class="two wide">์์ฑ์</th>
            <th class="three wide">์์ฑ์ผ</th>
            <th class="four wide">์กฐํ์</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="board : ${board}">
            <td th:text="${board.bno}">1</td>
            <td>
                <a th:href="@{board/{bno}(bno=${board.bno})}" class="board-title">
                    <span th:if="${board.depth > 0}" th:each="i : ${#numbers.sequence(1, board.depth)}" class="reply">&nbsp;โชRE:</span>
                    <span th:text="${board.title}">์๋ชฉ</span>
                    <span th:if="${board.new}" class="new">๐</span>
                </a>
            </td>
            <td th:text="${board.writer}">์์ฑ์</td>
            <td th:text="${board.regdate}">์์ฑ์ผ</td>
            <td th:text="${board.hit}">์กฐํ์</td>
        </tr>
        </tbody>
    </table>
    <div class="button-container text-center">
        <div th:if="${hasWritePermission}">
            <input type="button" value="๊ธ ์์ฑ" onclick="location.href='write'" class="btn btn-primary">
        </div>
    </div>
    <div class="col-sm-12 col-md-7 mx-auto">
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${paginate.pageNo <= 1} ? 'disabled'">
                    <a class="page-link" th:if="${paginate.pageNo > 1}" th:href="@{|/${boardType}/main?${paginate.params}&${paginate.pageName}=${paginate.pageNo - 1}|}" aria-label="Previous">
                        <span aria-hidden="true">&laquo; ์ด์</span>
                    </a>
                    <a class="page-link disabled" th:if="${paginate.pageNo <= 1}">
                        <span aria-hidden="true">&laquo; ์ด์</span>
                    </a>
                </li>
                <li th:each="pageNum : ${#numbers.sequence(paginate.nationBegin, paginate.nationClose)}" class="page-item" th:classappend="${pageNum == paginate.pageNo} ? 'active'">
                    <a class="page-link" th:href="@{|/${boardType}/main?${paginate.params}&${paginate.pageName}=${pageNum}|}" th:text="${pageNum}">1</a>
                </li>
                <li class="page-item" th:classappend="${paginate.pageNo >= paginate.totalPage} ? 'disabled'">
                    <a class="page-link" th:if="${paginate.pageNo < paginate.totalPage}" th:href="@{|/${boardType}/main?${paginate.params}&${paginate.pageName}=${paginate.pageNo + 1}|}" aria-label="Next">
                        <span aria-hidden="true">๋ค์ &raquo;</span>
                    </a>
                    <a class="page-link disabled" th:if="${paginate.pageNo >= paginate.totalPage}">
                        <span aria-hidden="true">๋ค์ &raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>
</body>
</html>